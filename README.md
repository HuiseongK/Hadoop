## Hadoop


### 1. HDFS

빅데이터를 전체 클러스터에 분산해 저장하여 애플리케이션이 그 데이터를 신속하게 액세스해 분석할 수 있게 만드는 분산 파일 시스템.

HDFS는 대용량 파일들을 작은 조각으로 나누어  클러스터 전체에 걸쳐 분산시키는데 최적화되어있음.

이 대용량 파일에는 센서나 웹 서버 등으로부터 받아오는 정보의 로그 등이 있음.

#### 1-1 HDFS의 동작 방식 

파일을 먼저 '데이터 블록'으로 쪼갬. 이 블록들은 기본적으로 128MB 크기이며, 이보다 작더라도 하나의 블록으로 간주함.

그 대용량 파일을 블록으로 나눔으로써 더 이상 하드 드라이브의 용량에 제한을 받지 않게 됨.

-> 각 하드 드라이브의 용량보다 훨씬 큰 파일을 저장할 수 있음.

HDFS는 이 대용량 파일을 분산해서 처리함. 그 대용량 파일을 쪼개 여러 컴퓨터에 걸쳐 저장했다면,

각 컴퓨터는 자기에게 저장된 데이터 블록을 동시에 처리할 수 있음.

또한 어떤 데이터 블록을 처리하는 컴퓨터가 데이터를 더 효율적으로 액세스할 수 있도록 해당 블록이 저장된 곳이랑 물리적으로 가까운 거리에 있도록 조정함.

데이터 관리를 위해 단 하나의 블록에다 데이터를 저장하지 않음.

모든 블록마다 두 개 이상의 복사본을 저장함. 이렇게 하면 특정 컴퓨터가 다운되더라도 HDFS가 그 블록의 백업 복사본을 갖고 있는 다른 컴퓨터에서 정보를 불러올 수 있음.

이러한 작동 방식 덕분에 고성능의 컴퓨터를 구매할 필요 없이 저렴한 여러대의 컴퓨터로 대용량의 데이터를 처리 할 수 있음 -> 비용 절감.

#### 1-2 네임 노드와 데아터 노드

네임 노드(또는 마스터 노드 라고도 함)는 어느 블록이 어디에 있는지를 추적하는 역할을 함. 

이 네임 노드에 주어진 파일의 이름과 HDFS 내의 가상 디렉터리 구조 등의 정보가 있고 그 파일과 관련된 모든 블록과 해당 복사본들이 어떤
노드에 저장되어 있는지가 기록되어 있음.

그리고 이 네임 노드에는 '편집 로그'(edit log)가 있는데 무엇이 생성되고, 어떤 게 수정되고 저장되는지 등의 정보가 기록됨.

죽, 모든 '데이터 노드'(Data Node)에 무엇이 있는지는 네임 노드에 기록되고, 클라이언트 애플리케이션은 네임 노드에 쿼리를 날려서 어디로 가야할지 알아낸 다음 궁극적으로 그 '데이터 노드'와 접근하여 데이터를 확인 할 수 있게 됨. 

'데이터 노드'는 파일의 블록을 저장하고 있는 곳이고 네임 노드와 데이터 노드는 블록의 복사본을 잘 유지하기 위해 서로 소통하기도 함.


#### 1-3 HDFS에서 파일을 읽는 과정

클라이언트 노드에서 작동 중인 어떤 애플리케이션이 HDFS에 저장돼 있는 데이터를 액세스하려고 하자.

애플리케이션은 먼저 네임 노드에게 파일 A가 필요하다고 말하고, 네임 노드는 파일 A는 이러이러한 데이터 노드의 어떠어떠한 블록들에 저장되어 있다고 알려줌.

그러면 클라이언트 애플리케이션은 해당 '데이터 노드'에 방문해 그 블록들을 가져와 파일 A를 구성함.
